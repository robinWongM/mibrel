syntax = "proto3";

package zyreva.v1;

message AnalyzeRequest {
  string url = 1;
}

message AnalyzeResponse {
  bool finished = 1;
  string log = 2;

  map<string, string> variables = 3;
  repeated string nix_pkgs = 4;
  repeated string install_cmds = 5;
  repeated string build_cmds = 6;
  string start_cmd = 7;
}

service AppService {
  rpc Analyze(AnalyzeRequest) returns (stream AnalyzeResponse) {}
  rpc Create(CreateRequest) returns (CreateResponse) {}
}